<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>连续数字出现次数统计</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }

      .table-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 20px;
      }

      th,
      td {
        border: 1px solid #ccc;
        text-align: center;
      }

      th {
        background-color: #f2f2f2;
      }

      .index-col {
        color: green;
      }
    </style>
  </head>

  <body>
    <div id="resultTriples" style="text-align: center;font-weight: bold;color: red;margin-bottom: 10px;"></div>
    <div class="table-container">
      <div id="resultPairs" style="margin-right: 30px"></div>
      <div id="resultDiff2" style="margin-right: 30px"></div>
      <div id="resultConsecutiveThree" style="margin-right: 30px"></div>
    </div>

    <script src="./046.js"></script>
    <script>
      // 获取页面的第一个 script 标签
      const firstScriptTag = document.querySelector("script");

      if (firstScriptTag) {
        document.title = "次序" + firstScriptTag.src.slice(-9);
      } else {
        console.log("页面中没有 script 标签。");
      }
    </script>
    <script>
      // 解析 ipt 数据，统计真正连续的两两和三三数字出现次数
      const lines = ipt.trim().split("\n");
      const consecutivePairsCount = {};
      const consecutiveTriplesCount = {};
      const diff2Count = {};
      const consecutiveThreeCount = {};

      lines.forEach((line) => {
        const parts = line.split("#")[0].trim().split(" ").map(Number);

        // 统计两两连续数字
        for (let i = 0; i < parts.length - 1; i++) {
          if (parts[i + 1] - parts[i] === 1) {
            const pair = `${parts[i]}-${parts[i + 1]}`;
            consecutivePairsCount[pair] =
              (consecutivePairsCount[pair] || 0) + 1;
          }
        }

        // 统计三三连续数字
        for (let i = 0; i < parts.length - 2; i++) {
          if (
            parts[i + 1] - parts[i] === 1 &&
            parts[i + 2] - parts[i + 1] === 1
          ) {
            const triple = `${parts[i]}-${parts[i + 1]}-${parts[i + 2]}`;
            consecutiveTriplesCount[triple] =
              (consecutiveTriplesCount[triple] || 0) + 1;
          }
        }

        // 统计数字之差为 2 的情况
        for (let i = 0; i < parts.length; i++) {
          for (let j = i + 1; j < parts.length; j++) {
            if (parts[j] - parts[i] === 2) {
              const pair = `${parts[i]}-${parts[j]}`;
              diff2Count[pair] = (diff2Count[pair] || 0) + 1;
            }
          }
        }

        // 统计连续三个数递增为 1 的情况
        for (let i = 0; i < parts.length - 2; i++) {
          if (
            parts[i + 1] - parts[i] === 1 &&
            parts[i + 2] - parts[i + 1] === 1
          ) {
            const triple = `${parts[i]}-${parts[i + 1]}-${parts[i + 2]}`;
            consecutiveThreeCount[triple] =
              (consecutiveThreeCount[triple] || 0) + 1;
          }
        }
      });

      // 处理两两连续数字统计结果
      const pairCountArray = [];
      const pairTotalCount = Object.values(consecutivePairsCount).reduce(
        (sum, count) => sum + count,
        0
      );
      for (const [pair, count] of Object.entries(consecutivePairsCount)) {
        const percentage = ((count / pairTotalCount) * 100).toFixed(2) + "%";
        pairCountArray.push({ pair, count, percentage });
      }
      pairCountArray.sort((a, b) => b.count - a.count);

      // 处理三三连续数字统计结果
      const tripleCountArray = [];
      const tripleTotalCount = Object.values(consecutiveTriplesCount).reduce(
        (sum, count) => sum + count,
        0
      );
      for (const [triple, count] of Object.entries(consecutiveTriplesCount)) {
        const percentage = ((count / tripleTotalCount) * 100).toFixed(2) + "%";
        tripleCountArray.push({ triple, count, percentage });
      }
      tripleCountArray.sort((a, b) => b.count - a.count);

      // 处理数字之差为 2 的统计结果
      const diff2CountArray = [];
      const diff2TotalCount = Object.values(diff2Count).reduce(
        (sum, count) => sum + count,
        0
      );
      for (const [pair, count] of Object.entries(diff2Count)) {
        const percentage = ((count / diff2TotalCount) * 100).toFixed(2) + "%";
        diff2CountArray.push({ pair, count, percentage });
      }
      diff2CountArray.sort((a, b) => b.count - a.count);

      // 处理连续三个数递增为 1 的统计结果
      const consecutiveThreeCountArray = [];
      const consecutiveThreeTotalCount = Object.values(
        consecutiveThreeCount
      ).reduce((sum, count) => sum + count, 0);
      for (const [triple, count] of Object.entries(consecutiveThreeCount)) {
        const percentage =
          ((count / consecutiveThreeTotalCount) * 100).toFixed(2) + "%";
        consecutiveThreeCountArray.push({ triple, count, percentage });
      }
      consecutiveThreeCountArray.sort((a, b) => b.count - a.count);

      // 生成两两连续数字表格
      const resultPairsDiv = document.getElementById("resultPairs");
      const pairTable = document.createElement("table");
      const pairHeaderRow = document.createElement("tr");
      const pairIndexHeader = document.createElement("th");
      pairIndexHeader.textContent = "index";
      pairIndexHeader.classList.add("index-col");
      const pairPairHeader = document.createElement("th");
      pairPairHeader.textContent = "两两连续数字对";
      const pairCountHeader = document.createElement("th");
      pairCountHeader.textContent = "出现次数";
      const pairPercentageHeader = document.createElement("th");
      pairPercentageHeader.textContent = "出现比例";
      pairHeaderRow.appendChild(pairIndexHeader);
      pairHeaderRow.appendChild(pairPairHeader);
      pairHeaderRow.appendChild(pairCountHeader);
      pairHeaderRow.appendChild(pairPercentageHeader);
      pairTable.appendChild(pairHeaderRow);

      pairCountArray.forEach((item, index) => {
        const row = document.createElement("tr");
        const indexCell = document.createElement("td");
        indexCell.textContent = index + 1;
        indexCell.classList.add("index-col");
        const pairCell = document.createElement("td");
        pairCell.textContent = item.pair;
        const countCell = document.createElement("td");
        countCell.textContent = item.count;
        const percentageCell = document.createElement("td");
        percentageCell.textContent = item.percentage;
        row.appendChild(indexCell);
        row.appendChild(pairCell);
        row.appendChild(countCell);
        row.appendChild(percentageCell);
        pairTable.appendChild(row);
      });

      resultPairsDiv.appendChild(pairTable);

      // 生成数字之差为 2 的表格
      const resultDiff2Div = document.getElementById("resultDiff2");
      const diff2Table = document.createElement("table");
      const diff2HeaderRow = document.createElement("tr");
      const diff2IndexHeader = document.createElement("th");
      diff2IndexHeader.textContent = "index";
      diff2IndexHeader.classList.add("index-col");
      const diff2PairHeader = document.createElement("th");
      diff2PairHeader.textContent = "数字之差为 2 的数字对";
      const diff2CountHeader = document.createElement("th");
      diff2CountHeader.textContent = "出现次数";
      const diff2PercentageHeader = document.createElement("th");
      diff2PercentageHeader.textContent = "出现比例";
      diff2HeaderRow.appendChild(diff2IndexHeader);
      diff2HeaderRow.appendChild(diff2PairHeader);
      diff2HeaderRow.appendChild(diff2CountHeader);
      diff2HeaderRow.appendChild(diff2PercentageHeader);
      diff2Table.appendChild(diff2HeaderRow);

      diff2CountArray.forEach((item, index) => {
        const row = document.createElement("tr");
        const indexCell = document.createElement("td");
        indexCell.textContent = index + 1;
        indexCell.classList.add("index-col");
        const pairCell = document.createElement("td");
        pairCell.textContent = item.pair;
        const countCell = document.createElement("td");
        countCell.textContent = item.count;
        const percentageCell = document.createElement("td");
        percentageCell.textContent = item.percentage;
        row.appendChild(indexCell);
        row.appendChild(pairCell);
        row.appendChild(countCell);
        row.appendChild(percentageCell);
        diff2Table.appendChild(row);
      });

      resultDiff2Div.appendChild(diff2Table);

      // 生成三三连续数字表格
      const resultTriplesDiv = document.getElementById("resultTriples");
      const tripleTable = document.createElement("table");
      const tripleHeaderRow = document.createElement("tr");
      const tripleIndexHeader = document.createElement("th");
      tripleIndexHeader.textContent = "index";
      tripleIndexHeader.classList.add("index-col");
      const tripleTripleHeader = document.createElement("th");
      tripleTripleHeader.textContent = "三三连续数字组";
      const tripleCountHeader = document.createElement("th");
      tripleCountHeader.textContent = "出现次数";
      const triplePercentageHeader = document.createElement("th");
      triplePercentageHeader.textContent = "出现比例";
      tripleHeaderRow.appendChild(tripleIndexHeader);
      tripleHeaderRow.appendChild(tripleTripleHeader);
      tripleHeaderRow.appendChild(tripleCountHeader);
      tripleHeaderRow.appendChild(triplePercentageHeader);
      tripleTable.appendChild(tripleHeaderRow);

      tripleCountArray.forEach((item, index) => {
        const row = document.createElement("tr");
        const indexCell = document.createElement("td");
        indexCell.textContent = index + 1;
        indexCell.classList.add("index-col");
        const tripleCell = document.createElement("td");
        tripleCell.textContent = item.triple;
        const countCell = document.createElement("td");
        countCell.textContent = item.count;
        const percentageCell = document.createElement("td");
        percentageCell.textContent = item.percentage;
        row.appendChild(indexCell);
        row.appendChild(tripleCell);
        row.appendChild(countCell);
        row.appendChild(percentageCell);
        tripleTable.appendChild(row);
      });

      // 生成连续三个数递增为 1 的表格
      const resultConsecutiveThreeDiv = document.getElementById(
        "resultConsecutiveThree"
      );
      const consecutiveThreeTable = document.createElement("table");
      const consecutiveThreeHeaderRow = document.createElement("tr");
      const consecutiveThreeIndexHeader = document.createElement("th");
      consecutiveThreeIndexHeader.textContent = "index";
      consecutiveThreeIndexHeader.classList.add("index-col");
      const consecutiveThreeTripleHeader = document.createElement("th");
      consecutiveThreeTripleHeader.textContent = "连续三个数递增为 1 的数组";
      const consecutiveThreeCountHeader = document.createElement("th");
      consecutiveThreeCountHeader.textContent = "出现次数";
      const consecutiveThreePercentageHeader = document.createElement("th");
      consecutiveThreePercentageHeader.textContent = "出现比例";
      consecutiveThreeHeaderRow.appendChild(consecutiveThreeIndexHeader);
      consecutiveThreeHeaderRow.appendChild(consecutiveThreeTripleHeader);
      consecutiveThreeHeaderRow.appendChild(consecutiveThreeCountHeader);
      consecutiveThreeHeaderRow.appendChild(consecutiveThreePercentageHeader);
      consecutiveThreeTable.appendChild(consecutiveThreeHeaderRow);

      consecutiveThreeCountArray.forEach((item, index) => {
        const row = document.createElement("tr");
        const indexCell = document.createElement("td");
        indexCell.textContent = index + 1;
        indexCell.classList.add("index-col");
        const tripleCell = document.createElement("td");
        tripleCell.textContent = item.triple;
        const countCell = document.createElement("td");
        countCell.textContent = item.count;
        const percentageCell = document.createElement("td");
        percentageCell.textContent = item.percentage;
        row.appendChild(indexCell);
        row.appendChild(tripleCell);
        row.appendChild(countCell);
        row.appendChild(percentageCell);
        consecutiveThreeTable.appendChild(row);
      });

      resultConsecutiveThreeDiv.appendChild(consecutiveThreeTable);

      resultTriplesDiv.innerHTML = g1.join(",");
    </script>
  </body>
</html>
