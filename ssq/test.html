<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>自定义三行数字布局</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        user-select: none;
      }

      .container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 20px;
      }

      .row {
        display: flex;
        gap: 8px;
      }

      .item {
        width: 40px;
        height: 40px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: #f9f9f9;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.2s ease;
      }

      .active {
        color: red;
        border-color: #ff9999;
        background-color: #fff0f0;
      }

      .empty {
        border: 1px dashed #eee;
        background-color: transparent;
        cursor: default;
      }

      .empty:hover {
        transform: none;
        background-color: transparent;
      }

      /* 按钮样式 */
      .btn {
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
        margin: 0 10px;
      }

      .btn:hover {
        background-color: #45a049;
      }

      .btn:active {
        background-color: #3e8e41;
      }

      /* 提示样式 */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 20px;
        border-radius: 4px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .toast.show {
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <div class="container" id="container">
      <!-- 第一行：1 2 3 [空] [空] 12 13 14 [空] [空] 23 24 25 -->
      <div class="row" id="row1"></div>

      <!-- 第二行：4 5 6 10 11 15 16 17 21 22 26 27 28 32 33 -->
      <div class="row" id="row2"></div>

      <!-- 第三行：与第一行对齐，补充空位置 -->
      <div class="row" id="row3"></div>
    </div>

    <!-- 功能按钮 -->
    <div style="display: flex; gap: 10px">
      <button class="btn" id="copyBtn">复制选中数字</button>
      <button class="btn" id="clearBtn">清空选择</button>
    </div>

    <!-- 操作提示 -->
    <div class="toast" id="toast"></div>

    <script>
      // 定义每行的数字数据（包括空元素）
      const row1Data = [
        1,
        2,
        3,
        "empty",
        "empty",
        12,
        13,
        14,
        "empty",
        "empty",
        23,
        24,
        25,
      ];
      const row2Data = [
        4, 5, 6, 10, 11, 15, 16, 17, 21, 22, 26, 27, 28, 32, 33,
      ];

      // 计算剩余的数字作为第三行
      const allNumbers = [
        1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
        21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,
      ];
      const usedNumbers = [...row1Data, ...row2Data].filter(
        (num) => num !== "empty"
      );
      const row3RemainingNumbers = allNumbers.filter(
        (num) => !usedNumbers.includes(num)
      );

      // 创建第三行数据，保持与第一行相同的空位置
      const row3Data = [...row1Data];
      let remainingIndex = 0;

      // 将剩余数字填入第三行，跳过空位置
      for (let i = 0; i < row3Data.length; i++) {
        if (
          row3Data[i] !== "empty" &&
          remainingIndex < row3RemainingNumbers.length
        ) {
          row3Data[i] = row3RemainingNumbers[remainingIndex];
          remainingIndex++;
        }
      }

      // 获取每行容器
      const row1 = document.getElementById("row1");
      const row2 = document.getElementById("row2");
      const row3 = document.getElementById("row3");

      // 创建行元素的函数
      function createRowItems(rowElement, rowData) {
        rowData.forEach((item) => {
          const div = document.createElement("div");
          div.className = `item ${item === "empty" ? "empty" : ""}`;
          div.textContent = item === "empty" ? "" : item;

          // 只有非空元素才添加点击事件
          if (item !== "empty") {
            div.addEventListener("click", function () {
              this.classList.toggle("active");
            });
          }

          rowElement.appendChild(div);
        });
      }

      // 生成三行数字
      createRowItems(row1, row1Data);
      createRowItems(row2, row2Data);
      createRowItems(row3, row3Data);

      // 复制选中数字的函数
      function copySelectedNumbers() {
        const selectedItems = document.querySelectorAll(
          ".item.active:not(.empty)"
        );
        const selectedNumbers = Array.from(selectedItems).map(
          (item) => item.textContent
        );

        if (selectedNumbers.length === 0) {
          showToast("请先选择要复制的数字！");
          return;
        }

        const numbersString = selectedNumbers.sort((a, b) => a - b).join(",");

        navigator.clipboard
          .writeText(numbersString)
          .then(() => {
            showToast("已复制: " + numbersString);
          })
          .catch((err) => {
            console.error("复制失败:", err);
            showToast("复制失败，请手动复制！");
          });
      }

      // 清空所有选择的函数
      function clearAllSelections() {
        const allItems = document.querySelectorAll(".item:not(.empty)");
        allItems.forEach((item) => {
          item.classList.remove("active");
        });
        showToast("已清空所有选择");
      }

      // 显示提示的函数
      function showToast(message) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
        }, 2000);
      }

      // 绑定按钮事件
      document
        .getElementById("copyBtn")
        .addEventListener("click", copySelectedNumbers);
      document
        .getElementById("clearBtn")
        .addEventListener("click", clearAllSelections);
    </script>
  </body>
</html>
